"use strict";(self.webpackChunkvest_website=self.webpackChunkvest_website||[]).push([[397],{3905:function(e,n,r){r.d(n,{Zo:function(){return c},kt:function(){return d}});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=t.createContext({}),s=function(e){var n=t.useContext(u),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},c=function(e){var n=s(e.components);return t.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},f=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,l=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),f=s(r),d=a,m=f["".concat(u,".").concat(d)]||f[d]||p[d]||l;return r?t.createElement(m,o(o({ref:n},c),{},{components:r})):t.createElement(m,o({ref:n},c))}));function d(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=f;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var s=2;s<l;s++)o[s]=r[s];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}f.displayName="MDXCreateElement"},6298:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return i},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return c},default:function(){return f}});var t=r(7462),a=r(3366),l=(r(7294),r(3905)),o=["components"],i={sidebar_position:1},u="Compound rules",s={unversionedId:"enforce/builtin-enforce-plugins/compound_rules",id:"enforce/builtin-enforce-plugins/compound_rules",isDocsHomePage:!1,title:"Compound rules",description:"Alongside the list of rules that only accept data provided by the user, enforce also supports compound rules - these are rules that accept other rules as their arguments. These rules let you validate more complex scenarios with the ergonomics of enforce.",source:"@site/docs/enforce/builtin-enforce-plugins/compound_rules.md",sourceDirName:"enforce/builtin-enforce-plugins",slug:"/enforce/builtin-enforce-plugins/compound_rules",permalink:"/docs/enforce/builtin-enforce-plugins/compound_rules",editUrl:"https://github.com/ealush/vest-website/edit/main/website/docs/enforce/builtin-enforce-plugins/compound_rules.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"List of Enforce rules",permalink:"/docs/enforce/enforce_rules"},next:{title:"Schema rules",permalink:"/docs/enforce/builtin-enforce-plugins/schema_rules"}},c=[{value:"enforce.anyOf() - either/or validations",id:"enforceanyof---eitheror-validations",children:[],level:2},{value:"enforce.allOf() - all/and validations",id:"enforceallof---alland-validations",children:[],level:2},{value:"enforce.oneOf()",id:"enforceoneof",children:[],level:2},{value:"enforce.noneOf - None rules",id:"enforcenoneof---none-rules",children:[],level:2},{value:"enforce.optional() - nullable values",id:"enforceoptional---nullable-values",children:[],level:2}],p={toc:c};function f(e){var n=e.components,r=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,t.Z)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"compound-rules"},"Compound rules"),(0,l.kt)("p",null,"Alongside the list of rules that only accept data provided by the user, enforce also supports compound rules - these are rules that accept other rules as their arguments. These rules let you validate more complex scenarios with the ergonomics of enforce."),(0,l.kt)("p",null,"To use it, simply import these rules in your project:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'import "vest/enforce/compounds";\n')),(0,l.kt)("p",null,"These rules will then become available in ",(0,l.kt)("inlineCode",{parentName:"p"},"enforce"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#compound-rules"},"Compound rules"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#enforceanyof---eitheror-validations"},"enforce.anyOf() - either/or validations")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#enforceallof---alland-validations"},"enforce.allOf() - all/and validations")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#enforceoneof"},"enforce.oneOf()")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#enforcenoneof---none-rules"},"enforce.noneOf - None rules")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#enforceoptional---nullable-values"},"enforce.optional() - nullable values"))))),(0,l.kt)("h2",{id:"enforceanyof---eitheror-validations"},"enforce.anyOf() - either/or validations"),(0,l.kt)("p",null,"Sometimes a value has more than one valid possibility, ",(0,l.kt)("inlineCode",{parentName:"p"},"any")," lets us validate that a value passes ",(0,l.kt)("em",{parentName:"p"},"at least")," one of the supplied rules."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"enforce(value).anyOf(enforce.isString(), enforce.isArray()).isNotEmpty();\n// A valid value would either an array or a string.\n")),(0,l.kt)("h2",{id:"enforceallof---alland-validations"},"enforce.allOf() - all/and validations"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"allOf")," lets us validate that a value passes ",(0,l.kt)("em",{parentName:"p"},"all")," of the supplied rules."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"enforce(value).allOf(enforce.isArray(), enforce.longerThan(2));\n")),(0,l.kt)("h2",{id:"enforceoneof"},"enforce.oneOf()"),(0,l.kt)("p",null,"enforce.oneOf can be used to determine if ",(0,l.kt)("em",{parentName:"p"},"exactly")," one of the rules applies. It will run against rule in the array, and will only pass if exactly one rule applies."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'enforce(value).oneOf(\n  enforce.isString(),\n  enforce.isNumber(),\n  enforce.longerThan(1)\n);\n\n/*\nvalue = 1      -> \u2705 (value is a number)\nvalue = "1"    -> \u2705 (value is string)\nvalue = [1, 2] -> \u2705 (value is longer than 1)\nvalue = "12"   -> \ud83d\udea8 (value is both a string and longer than 1)\n*/\n')),(0,l.kt)("h2",{id:"enforcenoneof---none-rules"},"enforce.noneOf - None rules"),(0,l.kt)("p",null,"enforce.noneOf can be used to determine if ",(0,l.kt)("em",{parentName:"p"},"none")," of the rules apply. It will run against each rules supplied, and will only pass if none of the rules pass."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'enforce(value).noneOf(\n  enforce.isString(),\n  enforce.isNumber(),\n  enforce.longerThan(1)\n);\n\nvalue = 1      -> \ud83d\udea8 (value is a number)\nvalue = "1"    -> \ud83d\udea8 (value is string)\nvalue = [1, 2] -> \ud83d\udea8 (value is longer than 1)\nvalue = ["12"] -> \u2705 (value is not a string and not longer than 1)\n\n')),(0,l.kt)("h2",{id:"enforceoptional---nullable-values"},"enforce.optional() - nullable values"),(0,l.kt)("p",null,"In regular cases, a missing value would cause a validation failure. To prevent that from happening, mark your optional keys with ",(0,l.kt)("inlineCode",{parentName:"p"},"enforce.optional"),"."),(0,l.kt)("p",null,"enforce.optional will pass validations of a key that's either not defined, undefined or null."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"enforce.optional")," takes as its arguments all the rules that their value must pass."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"enforce(middleName).optional(enforce.isString(), enforce.longerThan(3));\n")))}f.isMDXComponent=!0}}]);